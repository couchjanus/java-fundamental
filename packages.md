# Пакеты

Как правило, в Java классы объединяются в пакеты. Пакеты позволяют организовать классы логически в наборы. По умолчанию java уже имеет ряд встроенных пакетов, например, java.lang, java.util, java.io и т.д.

Пакет Java - это группа связанных файлов классов Java, обеспечивающая защиту доступа и управление пространством имен. 

Пакет package позволяет логически объединить классы в наборы. Основные классы java входят в пакет java.lang. Различные вспомогательные классы располагаются в пакете в java.util. Классы для ввода и вывода входят в пакет java.io, а классы для работы в сети – в java.net. Некоторые их этих пакетов содержат вложенные пакеты. Так, например, java.lang содержит два специализированных пакета java.lang.reflect и java.lang.ref, а java.util содержит подпакет java.util.zip, который включает классы для работы с ZIPархивами.

Организация классов в виде пакетов позволяет избежать конфликта имен между классами. Ведь нередки ситуации, когда разработчики называют свои классы одинаковыми именами. Принадлежность к пакету позволяет гарантировать однозначность имен.
Каждый класс имеет как простое имя, данное ему в определении, так и полное имя, включающее имя пакета, в который он входит. Например, класс String является частью пакета java.lang, а его полное имя – java.lang.String.

Структура пакетов в точности отображает структуру файловой системы. Все файлы с исходными кодами (java-класс) и байт-кодами (расширением class), образующие один пакет, хранятся в одном каталоге файловой системы. Подпакеты образуют подкаталоги этого каталога. Каждый пакет создает единое пространство имен namespace. Это означает, что все имена классов и интерфейсов в пакете должны быть уникальны. Имена в разных пакетах могут совпадать, но это будут разные программные модули. Организация классов в виде пакетов позволяет избежать конфликта имен между классами. В пакете дублирование имен классов не допускается. Принадлежность класса к пакету позволяет гарантировать однозначность имен.

## Директива package
Чтобы указать, что класс принадлежит определенному пакету, надо использовать директиву package, после которой указывается имя пакета: package название_пакета;
```java
package com.mycompany;
```
Как правило, названия пакетов соответствуют физической структуре проекта, то есть организации каталогов, в которых находятся файлы с исходным кодом. А путь к файлам внутри проекта соответствует названию пакета этих файлов. 

Классы необязательно определять в пакеты. Если для класса пакет не определен, то считается, что данный класс находится в пакете по умолчанию, который не имеет имени? «${project.src}», т.е. класс будет располагаться в корневой директории исходных кодов проекта.
```java
/**
 * @author janus
 *
 */
public class Main {

    public Main() {
        // TODO Auto-generated constructor stub
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

    }

}

```
## Пространства имен

Пространства имен - это логическая организация, а пакеты Java - это физическая реализация пространств имен.

В Java пространства имен предназначены для предотвращения конфликтов между именами в разных частях библиотек классов.

Поскольку пространства имен являются иерархическими, нам потребуется аналогичная структура для хранения файлов классов в пакеты. Файловые системы также являются иерархическими. Итак, чтобы сохранить классы, организованные в нашем пространстве имен, мы просто сопоставляем пространство имен с нашей файловой системой.

## Создание пакета

Создать пакет можно, щёлкаем правой кнопкой мыши на папке java или на существующем пакете и выбираем в меню команду New | Package.

Во время создания пакета вы должны выбрать ему имя и включить оператор package вместе с этим именем поверх каждого исходного файла, который содержит классы, интерфейсы, перечисления и типы аннотаций, которые вы хотите включить в пакет.
 
Оператор package должен быть первой строкой в исходном файле. Может быть только один запрос package в каждом исходном файле, и он применяется ко всем типам в этом файле.

Если оператор package не использован, тогда классы, интерфейсы, перечисления и типы аннотаций будут помещены в текущий пакет по умолчанию.

Пакеты должны располагаться в соответствующих директориях, т.е. файл пакета (с именем ИмяПакета) должен быть сохранен в папке ИмяПакета.

```java
/**
 * package-info.java
 */
/**
 * @author janus
 *
 */
package com.mycompany;

```

Наименование пакета может быть любым, но необходимо соблюдать его уникальность в проекте. Соглашение «Code Conventions» рекомендует записывать имена пакетов строчными буквами. Тогда они не будут совпадать с именами классов, которые, по соглашению, начинаются с прописной буквы.

Все классы, находящиеся внутри данного файла, будут принадлежать указанному пакету. Если оператор package не указан, то имена классов помещаются в специальный пакет без имени. 

Стандартная библиотека Java API включает сотни классов. Каждый программист в ходе работы создает десятки своих классов. Множество классов быстро увеличивается. 

Директива package должна находиться в первой незакоментированной строке файла.

```java

/**
 * 
 */
package com.mycompany;

/**
 * @author janus
 *
 */
public class Employee {

    /**
     * 
     */
    public Employee() {
        // TODO Auto-generated constructor stub
    }

}

```
## Создание уникальных имён пакетов
Существует общепринятая схема, где первая часть имени пакета должна состоять из перевёрнутого доменного имени разработчика класса. Так как доменные имена в интернете уникальны, соблюдение этого правила обеспечивает уникальность имён пакетов и предотврати конфликты. Если у вас нет собственного доменного имени, то придумайте свою уникальную комбинацию с малой вероятностью повторения.

Указывать один и тот же пакет можно в разных файлах, он просто указывает кому принадлежит класс. Поэтому, если три разных класса в трёх разных файлах указывают на один и тот же package, то это нормально.


пакет com.mycompany содержит интерфейс с названием ICompany.
```java
/**
 * File name : ICompany.java
 */
package com.mycompany;

public interface ICompany {
    public double calculate_payroll();

}

```

пакет com.mycompany содержит интерфейс с названием IEmployee.
```java

/**
 * File name : IEmployee.java
 */
package com.mycompany;

/**
 * @author janus
 *
 */
public interface IEmployee extends ICompany{
    public String getCompany();
    public String getName();
    public int getId();
    
    default String defaultMethod() {
        return "Объект типа String по умолчанию";
    }

}

```
 
реализуем интерфейс IEmployee в пакете com.mycompany:

```java
/**
 /* File name : Employee.java */
 */
package com.mycompany;

/**
 * @author janus
 *
 */
public abstract class Employee implements IEmployee {
    
    private int id;
    private String name;
    private String company;
    
    public Employee() {
    }
        
    public Employee(int id, String name, String company ) {
        this.name=name;
        this.id = id;
        this.company = company;
    }

    public String getCompany() {
          return company;
    }
    
    public String getName() { 
        return name; 
    }
    
    public int getId() { 
        return id; 
    }
}

```
Директива package com.mycompany в начале файла указывает, что классы Employee и интерфейс IEmployee принадлежат пакету com.mycompany.

В данном примере класс Employee располагается в пакете com.mycompany. Физически это директория «${project.src}/com/mycompany». При создании класса в среде разработки IDE (например, Eclipse) следует указать наименование пакета, тогда IDE самостоятельно при необходимости создаст каталог на жестком диске и разместит новый класс в этом каталоге.

## Импорт пакетов и классов

Если нам надо использовать классы из других пакетов, то нам надо подключить эти пакеты и классы. Исключение составляют классы из пакета java.lang (например, String), которые подключаются в программу автоматически.

Например, класс Scanner находится в пакете java.util, поэтому мы можем получить к нему доступ следующим способом:
```java
java.util.Scanner in = new java.util.Scanner(System.in);
```

То есть мы указываем полный путь к файлу в пакете при создании его объекта. Однако такое нагромождение имен пакетов не всегда удобно, и в качестве альтернативы мы можем импортировать пакеты и классы в проект с помощью директивы import, которая указывается после директивы package:

```java

import ИмяПакета.ИмяКласса;
import ИмяПакета.*;

```
В первом случае мы импортируем только один класс, а во втором — импортируем полный пакет. 

Директива import указывается в самом начале кода, после чего идет имя подключаемого класса.

```java

package com.mycommon;
 
import java.util.Scanner; // импорт класса Scanner
 
public class HelloWorld{
    public static void main(String[] args){
        Scanner in = new Scanner(System.in);
    } 
}

```

пакет java.util содержит большое количество разных классов. И чтобы не подключать по отдельности каждый класс, можно сразу подключить весь пакет :
```java
// имя класса можно указать явно или с помощью символа "звёздочка" (*):
import java.util.*; // импорт всех классов из пакета java.util

import java.io.*;
```
Теперь можно использовать любой класс из пакета java.util.

Возможна ситуация, когда используется два класса с одинаковым наименованием, но из разных пакетов. Это относится, например, к классам Date, которые имеются в пакете java.util и в пакете java.sql, или классам List пакетов java.util и java.awt. И если необходимо одновременно использовать оба эти класса, то необходимо указывать полный путь к классам в пакете :
```java
java.util.Date udate = new java.util.Date();
java.sql.Date  sdate = new java.sql.Date();

```
Программисты могут определять их пакеты для связывания групп классов/интерфейсов и т.д. Группировка связанных классов является хорошим практическим решением, т.к. программист сможет легко определить, что классы, интерфейсы, перечисления и аннотации связаны.

Так как пакет создаёт новое пространство имён, в нём не будет никаких конфликтов с именами в других пактах. Используя пакеты, легче предоставить управление доступом и легче найти связанные классы.


## Полное имя класса
Файлы в компьютере группируются по папкам. Классы в Java (каждый класс лежит в отдельном файле) группируются по пакетам, которые являются папками на диске. 

Полным уникальным именем класса является имя пакета + имя класса:

Полное уникальное имя: java.lang.String
Имя пакета: java.lang  
Имя класса: String

Полное имя класса всегда уникально!

В Java принято давать классам и пакетам осмысленные имена. Многие компании выпускают свои библиотеки (набор классов) и, чтобы не было путаницы, называют пакеты этих классов по имени компании/сайта:
```java

org.apache.common
org.apache.tomcat
org.apache.util Проект «Апач»
com.oracle.jdbc Компания «Oracle»
java.io
javax.servlet   Компания Sun, проект Java
com.ibm.websphere   Компания «IBM», проект WebSphere
com.jboss   Проект «Jboss»

```


## Статический импорт

В java можно использовать статический импорт. Для этого вместе с директивой import используется модификатор static:
```java

package com.mycommon;
 
import static java.lang.Math.*;
import static java.lang.System.*;
 
public class HelloWorld {
    public static void main(String[] args) {
        double result = sqrt(20);
        out.println(result);
    } 
}

```
Здесь определяется статический импорт классов System и Math, которые имеют статические методы. Определение статического импорта позволяет использовать статические методы без названия класса. 
В примере статическая функция sqrt(20) (можно и Math.sqrt(20)), возвращает квадратный корень числа. 
То же самое относится и к классу System, в котором определен статический объект out, поэтому можно его использовать без указания класса, если выполнен статический импорт класса System.

То же самое в отношении класса System: в нем определен статический объект out, поэтому мы можем его использовать без указания класса.

Статический импорт импортирует статическую переменную или методы. Тогда в вашем коде вам не нужно ссылаться на включающий класс.

## Пакеты могут быть вложенными
Пакеты могут быть вложенными (например, java.util, где java— главный пакет, a util — вложенный). Соответственно эти два пакета должны располагаться в каталоге java\util.

Можно создавать иерархию пакетов через точечный оператор:

```java

package pack1[.pack2[.pack3]];
// например
package cat.body.tail;

```
## создавать иерархию пакетов

Рассмотрим проект PackageExample, включающий 3 java-класса. Два java-класса располагаются в одном пакете «ua.com.company», а третий - в другом «ua.com.company.classes». 

## Базовый класс BaseClass.java

Базовый класс включает 2 поля (id, name) и методы get/set. В конструкторе значения полей инициализируется.
```java

package ua.com.company;

public class BaseClass 
{
    private    String id   = null;
    protected  String name = null;

    public BaseClass()
    {
        this.id   = "default";
        this.name = "Наименование не определено"; 
    }
    public String getId() {
        return id;
    }
    public void setId(String id) {
        this.id = id;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    @Override
    public String toString() {
        return this.getClass().getName() + "\n\t{id = '" + 
                         id + "', name = '" + name + "'}";
    }
}

```

Переопределенная функция toString() возвращает наименование класса и значение полей.

## Класс наследника Inheritor.java

Класс Inheritor.java наследует свойства базового класса BaseClass.java. Поскольку классы располаются в разных пакетах, то базовый класс необходимо импортировать.
```java

package ua.com.company.classes;

import ua.com.company.BaseClass;

public class Inheritor extends BaseClass
{
    public Inheritor()
    {
        this.name = "Наследник";
        this.setId("Первый");
    }
}

```

## Основной класс MainPackage.java
Основной класс включает статический метод main. Поскольку данный класс не «видит» наследника, то его приходится импортировать.
```java

package ua.com.company;

import ua.com.company.classes.Inheritor;

public class MainPackage 
{
    public MainPackage()
    {
        BaseClass bc = new BaseClass();
        Inheritor ir = new Inheritor();

        System.out.println (bc.toString());
        System.out.println (ir.toString());
    }
    
    public static void main(String[] args) 
    {
        new MainPackage();
        System.exit(0);
    }
}

```
Результат выполнения данной программы выводится в консоль в следующем виде :
```java

ua.com.company.BaseClass:
    {id = 'default', name = 'Наименование не определено'}
ua.com.company.classes.Inheritor:
    {id = 'Первый', name = 'Наследник'}

``` 
